<div class="edit-profile-loader" *ngIf="isUserLoading">
  <mat-spinner mode="indeterminate"></mat-spinner>
</div>

<div *ngIf="!isUserLoading" style="display: flex;justify-content: center;    margin-top: 25vh;">

  <mat-card style="width: 50vw;">

    <form novalidate [formGroup]="profileForm" (ngSubmit)="onSubmit(profileForm)">

      <mat-form-field hintLabel="Максимум 30 симолів">
        <input #fullnameinput matInput placeholder="Повне ім'я" formControlName="fullname" required>
         <mat-hint align="end">{{fullnameinput.value?.length || 0}}/30</mat-hint>
        <mat-error *ngIf="profileForm.get('fullname').hasError('required') && profileForm.get('fullname').touched">
          Обов'язкове поле
        </mat-error>

        <mat-error *ngIf="profileForm.get('fullname').hasError('minlength') && profileForm.get('fullname').touched">
          Мінімум 2 символи
        </mat-error>

        <mat-error *ngIf="profileForm.get('fullname').hasError('maxlength') && profileForm.get('fullname').touched">
          Максимум 30 символів
        </mat-error>
      </mat-form-field>

       <mat-form-field>
        <input type="email" matInput placeholder="Email" formControlName="email" required>

         <mat-error *ngIf="profileForm.get('email').hasError('email') && profileForm.get('email').touched">
          Невірний формат email
        </mat-error>

        <mat-error *ngIf="profileForm.get('email').hasError('required') && profileForm.get('email').touched">
          Обов'язкове поле
        </mat-error>

        <mat-error *ngIf="profileForm.get('email').hasError('minlength') && profileForm.get('email').touched">
           Мінімум 2 символи
        </mat-error>

      </mat-form-field>

      <div class="error" *ngIf="errors.email">{{ errors.email }}</div>

      <div class="submit-button-wrap">
        <button type="submit" mat-raised-button color="primary" [disabled]="!profileForm.valid || isFormSubmitting">Редагувати</button>
      </div>

      <ng-container *ngIf="isFormSubmitting">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </ng-container>

    </form>

  </mat-card>

</div>
